<!-- templates/preview_status.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Processing Preview</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <meta http-equiv="refresh" content="5">
</head>
<body class="container py-5 text-center">
  <h2 class="mb-4">⏳ Generating Preview...</h2>
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>

  <ul class="list-group mt-4">
  <li class="list-group-item" id="inpaintStatus">🖌 Inpainting: Loading...</li>
  <li class="list-group-item" id="translateStatus">🌐 Translating: Loading...</li>
  <li class="list-group-item" id="renderStatus">✍️ Rendering: Loading...</li>
  </ul>


  <p class="mt-3 text-muted">Your comic is being translated and rendered.<br>
     This page will automatically refresh every 5 seconds.</p>
  <p class="text-muted small">Session ID: {{ folder }}</p>



</body>

<script>
  const stageData = {{ stage_data | tojson | safe }};

    function updateStatusUI() {
    document.getElementById("inpaintStatus").innerText = stageData.inpainting
      ? "🖌 Inpainting: ✅ Done" : "🖌 Inpainting: ⏳ Processing...";
    document.getElementById("translateStatus").innerText = stageData.translating
      ? "🌐 Translating: ✅ Done" : "🌐 Translating: ⏳ Processing...";
    document.getElementById("renderStatus").innerText = stageData.rendering
      ? "✍️ Rendering: ✅ Selesai" : "✍️ Rendering: ⏳ Processing...";
  }

  updateStatusUI();

</script>
</html>
